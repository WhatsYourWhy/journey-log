<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#5f4bb6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Journey Log">

    <title>The Journey Log</title>

    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="icons/icon-192.svg" type="image/svg+xml" sizes="192x192">
    <link rel="icon" href="icons/icon-512.svg" type="image/svg+xml" sizes="512x512">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">
    <link rel="mask-icon" href="icons/icon-maskable.svg" color="#5f4bb6">
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <div class="container">

        <h1>The Journey Log</h1>

        <section class="start-cue" aria-label="Quick start guide">
            <p class="start-cue-title">Start here</p>
            <div class="start-cue-step">
                <span class="start-cue-step-number" aria-hidden="true">1</span>
                <p class="start-cue-text">Type one small step.</p>
            </div>
            <div class="start-cue-step">
                <span class="start-cue-step-number" aria-hidden="true">2</span>
                <p class="start-cue-text">Tap Add Step to save.</p>
            </div>
            <button id="startCueButton" class="start-cue-cta" type="button">Start with one step</button>
        </section>

        <div class="theme-selector">
            <label for="theme">Theme</label>
            <select id="theme">
                <option value="comfort" selected>Comfort</option>
                <option value="forest">Forest</option>
                <option value="ocean">Ocean</option>
                <option value="dark">Midnight</option>
                <option value="high-contrast">High contrast</option>
            </select>
            <label class="artful-toggle" for="artfulMode">
                <input type="checkbox" id="artfulMode" aria-label="Toggle artful illustrations">
                Artful mode
            </label>
        </div>

        <div class="wisdom-toggle">
            <input type="checkbox" id="wisdomToggle" name="wisdomToggle" checked>
            <label for="wisdomToggle">Show wisdom</label>
        </div>

        <section class="insights" aria-label="Journey insights">

            <div class="insight-card">

                <p class="label">Total steps</p>

                <p id="totalCount" data-testid="total-count" class="value" aria-live="polite" aria-atomic="true">0</p>

            </div>

            <div class="insight-card">

                <p class="label">Completed</p>

                <p id="completedCount" data-testid="completed-count" class="value" aria-live="polite" aria-atomic="true">0</p>

            </div>

            <div class="insight-card">

                <p class="label">Active</p>

                <p id="activeCount" data-testid="active-count" class="value" aria-live="polite" aria-atomic="true">0</p>

            </div>

            <div class="insight-card progress-card">

                <p class="label">Progress</p>

                <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" data-testid="progress-bar">

                    <div id="progressFill" class="progress-fill" data-testid="progress-fill"></div>

                </div>

                <p id="progressPercent" data-testid="progress-percent" class="value" aria-live="polite" aria-atomic="true">0%</p>

            </div>

        </section>
        <p class="insights-caption">Totals show how many steps you have, how many are done, and what remains. The progress bar tracks the percentage completed.</p>

        <p class="insights-note">These update when you check or add steps.</p>
        <div class="milestone-wrapper" aria-live="polite">
            <div class="milestone-header">
                <p class="milestone-title">Milestones</p>
                <p class="milestone-subtitle">Unlock markers as you complete steps.</p>
            </div>
            <div id="milestoneStrip" class="milestone-strip" aria-label="Milestones" role="group"></div>
        </div>

        <div class="input-section">

            <div class="input-meta" aria-label="Journey step details">
                <input type="text" id="taskInput" placeholder="Add a new step in your journey..." aria-label="New journey step description" autocomplete="off">
                <div class="selectors">
                    <label for="moodSelect">Mood</label>
                    <select id="moodSelect" aria-label="Select a mood for this step" aria-describedby="moodHelper">
                        <option value="">Mood (optional)</option>
                        <option value="bright">ðŸ˜Š Bright</option>
                        <option value="calm">ðŸ§˜ Calm</option>
                        <option value="focused">ðŸŽ¯ Focused</option>
                        <option value="reflective">ðŸŒ™ Reflective</option>
                    </select>
                    <p id="moodHelper" class="selector-helper">Choose the vibe guiding this step.</p>
                    <label for="categorySelect">Category</label>
                    <select id="categorySelect" aria-label="Select a category for this step">
                        <option value="">Category (optional)</option>
                        <option value="wellness">Wellness</option>
                        <option value="creative">Creative</option>
                        <option value="planning">Planning</option>
                        <option value="connection">Connection</option>
                    </select>
                    <fieldset class="priority-pill" aria-label="Set a priority for this step">
                        <legend>Priority</legend>
                        <div class="pill-options" role="group" aria-label="Priority options">
                            <button type="button" class="priority" data-priority="" aria-label="No priority" aria-pressed="true">None</button>
                            <button type="button" class="priority" data-priority="low" aria-label="Low priority" aria-pressed="false">Low</button>
                            <button type="button" class="priority" data-priority="medium" aria-label="Medium priority" aria-pressed="false">Medium</button>
                            <button type="button" class="priority" data-priority="high" aria-label="High priority" aria-pressed="false">High</button>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="cta-wrapper">
                <button id="addTaskButton" aria-label="Add a new journey step">Add Step</button>
                <button id="addTaskButtonSecondary" type="button" aria-label="Add a journey step near the keyboard">Add</button>
                <div id="addHelperBubble" class="helper-bubble hidden" role="status" aria-live="polite" aria-hidden="true">
                    Tap Add after you type.
                </div>
                <div id="inputValidation" data-testid="input-validation" class="input-validation hidden" role="status" aria-live="polite" aria-hidden="true"></div>
                <div id="saveStatus" class="save-status" role="status" aria-live="polite" aria-hidden="true"></div>
            </div>
            <button id="secondaryAddButton" class="secondary-add" type="button" aria-label="Add a journey step (mobile-friendly)">Add</button>

        </div>

        <div class="bulk-actions" role="toolbar" aria-label="Task selection controls">
            <div class="bulk-toggle">
                <label class="sr-only" for="selectAllCheckbox">Select all tasks</label>
                <input type="checkbox" id="selectAllCheckbox" aria-label="Select all tasks">
                <span aria-hidden="true" class="bulk-toggle-label">Select all</span>
            </div>
            <button id="clearSelectedButton" type="button">Clear selected</button>
            <button id="clearCompletedButton" type="button" aria-label="Clear all completed journey steps">Clear Completed Steps</button>
            <button id="undoDeleteButton" type="button" class="hidden">Undo delete</button>
            <button id="exportJourneyButton" type="button">Export Journey</button>
            <button id="importJourneyButton" type="button">Import Journey</button>
            <input id="importJourneyInput" type="file" accept="application/json,.json" class="hidden" aria-hidden="true" tabindex="-1">
        </div>

        <div id="emptyState" class="empty-state hidden" aria-live="polite">
            <div class="carousel">
                <div class="carousel-icon" aria-hidden="true">âœ¨</div>
                <p id="carouselPrompt" class="carousel-prompt" role="status" aria-live="polite" aria-atomic="true"></p>
                <button id="shufflePrompt" type="button" aria-label="Shuffle creative prompt">Shuffle</button>
            </div>
            <p class="carousel-caption">Let a playful prompt spark the next step in your story.</p>
        </div>

        <div id="starterHint" class="starter-hint hidden" role="status" aria-live="polite">
            <p><strong>Quick start:</strong> Type a step and press Enter. Weâ€™ll keep it saved.</p>
        </div>

        <ul id="taskList" aria-labelledby="taskListLabel">

        </ul>

        <div id="wisdomDisplay" class="hidden" role="region" aria-live="polite" aria-expanded="false">

            <div class="wisdom-header">
                <p class="wisdom-title"><strong>Wisdom for this step:</strong></p>
                <button id="refreshWisdom" type="button" aria-label="Refresh insight" class="micro-button">Refresh insight</button>
            </div>

            <p id="wisdomText" class="wisdom-quote"></p>
            <p id="wisdomAttribution" class="wisdom-attribution"></p>

        </div>

    </div>

    <script src="src/domain/insights.js"></script>
    <script src="src/domain/tasks.js"></script>
    <script src="src/services/storage.js"></script>
    <script src="src/ui/render.js"></script>
    <script src="src/app/init.js"></script>
    <script src="script.js"></script>

</body>

</html>
